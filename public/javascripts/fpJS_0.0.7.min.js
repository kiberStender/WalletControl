/*! fpJS 0.0.7 2015-03-28 18:31:18 */
(function(){var fpJS,root,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__slice=[].slice;fpJS=function(){var Any,Applicative,Cons,Either,EmptyMap,FPNode,Failure,Functor,IO,IOPerformer,Just,KVMap,Left,Map,Maybe,Monad,Nil,Nothing,Ordering,Range,Right,Seq,State,Success,Traversable,Try,Unit,arrayToSeq,emptyMap,emptyTreeInstance,map,mapInstance,nil,nilInstance,notInstance,nothing,seq,unit,unitInstance,_try;return notInstance=null,mapInstance=null,nilInstance=null,emptyTreeInstance=null,unitInstance=null,Function.prototype.compose=function(g){return function(_this){return function(x){return _this(g(x))}}(this)},Function.prototype.andThen=function(g){return function(_this){return function(x){return g(_this(x))}}(this)},Object.prototype.equals=function(o){return this.toString()===o.toString()},Object.prototype.compare=function(){throw Error("(Object::compare) No implementation")},Object.prototype.lessThan=function(x){return-1===this.compare(x)},Object.prototype.greaterThan=function(x){return 1===this.compare(x)},Number.prototype.compare=function(x){return"number"==typeof x?this+0===x?0:x>this+0?-1:1:-2},String.prototype.compare=function(s){return"string"==typeof s?this+""===s?0:s>this+""?-1:1:-2},Any=function(){function Any(){throw Error("(Any) No direct constructor")}return Any.prototype.toString=function(){return""+this},Any.prototype.hashCode=function(){return 13},Any.prototype.equals=function(x){return x instanceof Any&&this.hashCode()===x.hashCode()},Any}(),Ordering=function(_super){function Ordering(){return Ordering.__super__.constructor.apply(this,arguments)}return __extends(Ordering,_super),Ordering.prototype.compare=function(){throw Error("(Ordering::compare) No implementation")},Ordering.prototype.lessThan=function(x){return-1===this.compare(x)},Ordering.prototype.greaterThan=function(x){return 1===this.compare(x)},Ordering}(Any),Unit=function(_super){function Unit(){this.equals=function(u){return u instanceof Unit},this.toString=function(){return"Unit"}}return __extends(Unit,_super),Unit}(Any),unit=function(){return unitInstance?unitInstance:unitInstance=new Unit},Functor=function(_super){function Functor(){return Functor.__super__.constructor.apply(this,arguments)}return __extends(Functor,_super),Functor.prototype.fmap=function(){throw Error("(Functor::fmap) No implementation")},Functor}(Any),Applicative=function(_super){function Applicative(){return Applicative.__super__.constructor.apply(this,arguments)}return __extends(Applicative,_super),Applicative.prototype.afmap=function(){throw Error("(Applicative::afmap) No implementation")},Applicative}(Functor),Monad=function(_super){function Monad(){return Monad.__super__.constructor.apply(this,arguments)}return __extends(Monad,_super),Monad.prototype.flatMap=function(){throw Error("(Monad::flatMap) No implementation")},Monad}(Applicative),Maybe=function(_super){function Maybe(){return Maybe.__super__.constructor.apply(this,arguments)}return __extends(Maybe,_super),Maybe.prototype.fmap=function(fn){return this instanceof Nothing?this:new Just(fn(this.get()))},Maybe.prototype.afmap=function(some){return some instanceof Nothing?this:this.fmap(some.get())},Maybe.prototype.flatMap=function(f){return this instanceof Nothing?this:f(this.get())},Maybe.prototype.getOrElse=function(){throw Error("(Maybe::getOrElse) No implementation")},Maybe.prototype.get=function(){throw Error("(Maybe::get) No implementation")},Maybe}(Monad),Just=function(_super){function Just(v){this.toString=function(){return"Just("+v+")"},this.get=function(){return v},this.getOrElse=function(){return v},this.equals=function(x){return x instanceof Just?v.equals(x.get()):!1}}return __extends(Just,_super),Just}(Maybe),Nothing=function(_super){function Nothing(){this.toString=function(){return"Nothing"},this.get=function(){throw new Error("Nothing.get")},this.getOrElse=function(v){return v()},this.equals=function(x){return x instanceof Nothing}}return __extends(Nothing,_super),Nothing}(Maybe),nothing=function(){return null===notInstance?notInstance=new Nothing:notInstance},Traversable=function(_super){function Traversable(){return Traversable.__super__.constructor.apply(this,arguments)}return __extends(Traversable,_super),Traversable.prototype.isEmpty=function(){throw Error("(Traversable::isEmpty) Not implemented yet!!!")},Traversable.prototype.head=function(){throw Error("(Traversable::head) Not implemented yet!!!")},Traversable.prototype.tail=function(){throw Error("(Traversable::tail) Not implemented yet!!!")},Traversable.prototype.init=function(){throw Error("(Traversable::init) Not implemented yet!!!")},Traversable.prototype.last=function(){throw Error("(Traversable::last) Not implemented yet!!!")},Traversable.prototype.maybeHead=function(){throw Error("(Traversable::maybeHead) Not implemented yet!!!")},Traversable.prototype.maybeLast=function(){throw Error("(Traversable::maybeLast) Not implemented yet!!!")},Traversable.prototype.empty=function(){throw Error("(Traversable::empty) Not implemented yet!!!")},Traversable.prototype.cons=function(){throw Error("(Traversable::cons) Not implemented yet!!!")},Traversable.prototype.concat=function(){throw Error("(Traversable::concat) Not implemented yet!!!")},Traversable.prototype.toString=function(){return""+this.prefix()+"("+this.foldLeft("")(this.toStringFrmt)+")"},Traversable.prototype.prefix=function(){throw Error("(Traversable::prefix) Not implemented yet!!!")},Traversable.prototype.toStringFrmt=function(){return function(){throw Error("(Traversable::toStringFrmt) Not implemented yet!!!")}},Traversable.prototype.length=function(){return this.foldLeft(0)(function(acc){return function(){return acc+1}})},Traversable.prototype.filter=function(p){return this.foldLeft(this.empty())(function(acc){return function(item){return p(item)?acc.cons(item):acc}})},Traversable.prototype.filterNot=function(p){return this.filter(function(x){return!p(x)})},Traversable.prototype.partition=function(p){return[this.filter(p),this.filterNot(p)]},Traversable.prototype.find=function(p){return this.isEmpty()?nothing():p(this.head())?new Just(this.head()):this.tail().find(p)},Traversable.prototype.contains=function(item){return this.find(function(x){return item.equals(x)})instanceof Just},Traversable.prototype.splitAt=function(){throw Error("(Traversable::splitAt) Not implemented yet!!!")},Traversable.prototype.foldLeft=function(acc){return function(_this){return function(f){return _this.isEmpty()?acc:_this.tail().foldLeft(f(acc)(_this.head()))(f)}}(this)},Traversable.prototype.foldRight=function(acc){return function(_this){return function(fn){return _this.isEmpty()?acc:fn(_this.head())(_this.tail().foldRight(acc)(fn))}}(this)},Traversable.prototype.fmap=function(f){return this.foldRight(this.empty())(function(item){return function(acc){return acc.cons(f(item))}})},Traversable.prototype.flatMap=function(f){return this.isEmpty()?this.empty():this.tail().flatMap(f).concat(f(this.head()))},Traversable.prototype.afmap=function(listfn){return listfn.flatMap(function(_this){return function(f){return _this.fmap(f)}}(this))},Traversable.prototype.zip=function(tr){return this.isEmpty()||tr.isEmpty()?this.empty():this.tail().zip(tr.tail()).cons([this.head(),tr.head()])},Traversable.prototype.zipWith=function(tr){return function(_this){return function(fn){return _this.zip(tr).fmap(fn)}}(this)},Traversable}(Monad),Map=function(_super){function Map(){return Map.__super__.constructor.apply(this,arguments)}return __extends(Map,_super),Map.prototype.prefix=function(){return"Map"},Map.prototype.empty=function(){return emptyMap()},Map.prototype.toStringFrmt=function(acc){return function(item){var k,v;return k=item[0],v=item[1],""===acc?"("+k+" -> "+v+")":""+acc+", ("+k+" -> "+v+")"}},Map.prototype.add=function(x){return new KVMap(x,this)},Map.prototype.cons=function(x){if(this.isEmpty())return this.add(x);switch(x[0].compare(this.head()[0])){case 1:return this.tail().cons(x).add(this.head());case 0:return x[1].equals(this.head()[1])?this:this.tail().cons(x);default:return this.tail().add(this.head()).add(x)}},Map.prototype.concat=function(prefix){var helper;return helper=function(l1){return function(l2){return l2.isEmpty()?l1:l1.isEmpty()?l2:helper(l1.cons(l2.head()))(l2.tail())}},helper(this)(prefix)},Map.prototype.get=function(k){var n,x,y,_ref;return n=this.length(),0===n?nothing():1===n?this.head()[0].equals(k)?new Just(this.head()[1]):nothing():(_ref=this.splitAt(Math.round(n/2)),x=_ref[0],y=_ref[1],y.head()[0].compare(k)>0?x.get(k):y.get(k))},Map.prototype.getV=function(k){return this.get(k).getOrElse(function(){throw Error("No such element")})},Map.prototype.splitAt=function(el){var splitR;return splitR=function(n){return function(cur){return function(pre){return cur.isEmpty()?[pre,emptyMap()]:0===n?[pre,cur]:splitR(n-1)(cur.tail())(pre.cons(cur.head()))}}},splitR(el)(this)(this.empty())},Map}(Traversable),KVMap=function(_super){function KVMap(head,tail){this.isEmpty=function(){return!1},this.head=function(){return head},this.tail=function(){return tail},this.init=function(){return tail.isEmpty()?this.empty():tail.init().cons(head)},this.last=function(){return tail.isEmpty()?head:tail.last()},this.maybeHead=function(){return new Just(head)},this.maybeLast=function(){return new Just(last())},this.equals=function(x){return x instanceof KVMap&&head.equals(x.head())?tail.equals(x.tail()):!1}}return __extends(KVMap,_super),KVMap}(Map),EmptyMap=function(_super){function EmptyMap(){this.isEmpty=function(){return!0},this.head=function(){throw Error("No such element")},this.tail=function(){throw Error("No such element")},this.init=function(){throw Error("No such element")},this.last=function(){throw Error("No such element")},this.maybeHead=function(){return nothing()},this.maybeLast=function(){return nothing()},this.headOps=function(){return nothing()},this.equals=function(x){return x instanceof EmptyMap}}return __extends(EmptyMap,_super),EmptyMap}(Map),emptyMap=function(){return null===mapInstance?mapInstance=new EmptyMap:mapInstance},map=function(){var helper,items;return items=1<=arguments.length?__slice.call(arguments,0):[],(helper=function(its){return 0===its.length?emptyMap():helper(its.slice(1)).cons(its[0])})(items.reverse())},Seq=function(_super){function Seq(){return Seq.__super__.constructor.apply(this,arguments)}return __extends(Seq,_super),Seq.prototype.prefix=function(){return"Seq"},Seq.prototype.empty=function(){return nil()},Seq.prototype.toStringFrmt=function(acc){return function(item){return""===acc?item:""+acc+", "+item}},Seq.prototype.cons=function(el){return new Cons(el,this)},Seq.prototype.reverse=function(){return this.foldLeft(this.empty())(function(acc){return function(item){return acc.cons(item)}})},Seq.prototype.concat=function(prefix){var helper;return helper=function(acc){return function(other){return other.isEmpty()?acc:helper(acc.cons(other.head()))(other.tail())}},helper(this)(prefix.reverse())},Seq.prototype.splitAt=function(el){var splitR;return splitR=function(n){return function(cur){return function(pre){return cur.isEmpty()?[pre.reverse(),nil()]:0===n?[pre.reverse(),cur]:splitR(n-1)(cur.tail())(pre.cons(cur.head()))}}},splitR(el)(this)(this.empty())},Seq.prototype.flatten=function(){return this.head()instanceof Seq?this.foldRight(this.empty())(function(item){return function(acc){return acc.concat(item)}}):this},Seq}(Traversable),seq=function(){var items;return items=1<=arguments.length?__slice.call(arguments,0):[],0===items.length?nil():seq.apply(this,items.slice(1)).cons(items[0])},arrayToSeq=function(arr){var helper;if(arr instanceof Array)return helper=function(head){return function(tail){return head instanceof Array?helper(head[0])(head.slice(1)):0===tail.length?seq(head):helper(tail[0])(tail.slice(1)).cons(head)}},0===arr.length?seq():arrayToSeq(arr.slice(1)).cons(arr[0]instanceof Array?helper(arr[0][0])(arr[0].slice(1)):arr[0]);throw new Error("Not an Array")},Cons=function(_super){function Cons(head,tail){this.isEmpty=function(){return!1},this.head=function(){return head},this.tail=function(){return tail},this.init=function(){return this.reverse().tail().reverse()},this.last=function(){return this.reverse().head()},this.maybeHead=function(){return new Just(head)},this.maybeLast=function(){return new Just(last())},this.equals=function(x){return x instanceof Cons&&head.equals(x.head())?tail.equals(x.tail()):!1}}return __extends(Cons,_super),Cons}(Seq),Nil=function(_super){function Nil(){this.isEmpty=function(){return!0},this.head=function(){throw Error("No such element")},this.tail=function(){throw Error("No such element")},this.init=function(){throw Error("No such element")},this.last=function(){throw Error("No such element")},this.maybeHead=function(){return nothing()},this.maybeLast=function(){return nothing()},this.headOps=function(){return nothing()},this.equals=function(x){return x instanceof Nil}}return __extends(Nil,_super),Nil}(Seq),nil=function(){return null===nilInstance?nilInstance=new Nil:nilInstance},Range=function(_super){function Range(start,end,step){null==step&&(step=1),this.prefix=function(){return"Range"},this.head=function(){return start},this.tail=function(){return this.isEmpty()?nil():new Range(start+step,end,step)},this.isEmpty=function(){return start>end},this.by=function(st){return new Range(start,end,st)}}return __extends(Range,_super),Range}(Seq),Number.prototype.to=function(end){return new Range(this+0,end)},Number.prototype.until=function(end){return new Range(this+0,end-1)},Either=function(_super){function Either(){return Either.__super__.constructor.apply(this,arguments)}return __extends(Either,_super),Either.prototype.fold=function(rfn,lfn){return this instanceof Right?rfn(this.value()):lfn(this.value())},Either}(Any),Right=function(_super){function Right(value){this.value=function(){return value},this.toString=function(){return"Right("+value+")"}}return __extends(Right,_super),Right}(Either),Left=function(_super){function Left(value){this.value=function(){return value}}return __extends(Left,_super),Left}(Either),Try=function(_super){function Try(){return Try.__super__.constructor.apply(this,arguments)}return __extends(Try,_super),Try.apply=function(fn){var e;try{return new Success(fn())}catch(_error){return e=_error,new Failure(e)}},Try}(Monad),_try=Try.apply,Success=function(_super){function Success(value){this.flatMap=function(f){var e;try{return f(value)}catch(_error){return e=_error,new Failure(e)}},this.fmap=function(fn){return _try(function(){return fn(value)})},this.getOrElse=function(){return value},this.toString=function(){return"Success("+value+")"}}return __extends(Success,_super),Success}(Try),Failure=function(_super){function Failure(exception){this.flatMap=function(){return this},this.fmap=function(){return this},this.getOrElse=function(v){return v()},this.toString=function(){return"Failure("+exception+")"}}return __extends(Failure,_super),Failure}(Try),IO=function(_super){function IO(f){this.unsafePerformIO=function(){return f()},this.join=function(action){return new IO(function(){return action.unsafePerformIO().unsafePerformIO()})},this.fmap=function(fn){return new IO(function(_this){return function(){return fn(_this.unsafePerformIO())}}(this))},this.flatMap=function(fn){return this.join(this.fmap(fn))},this.foreach=function(io){return this.flatMap(function(){return io})},this.toString=function(){return"IO"}}return __extends(IO,_super),IO}(Monad),FPNode=function(){function FPNode(obj){this.getValue=function(){return new IO(function(){return obj instanceof HTMLInputElement?obj.value:obj.innerHTML})},this.setValue=function(vl){return new IO(function(){return obj instanceof HTMLInputElement?(obj.value=vl,unit()):(obj.innerHTML=vl,unit())})}}return FPNode}(),IOPerformer=function(){var alertIO,consoleIO,ioPerform,main,queryAnalyzer;return ioPerform=function(fn){return function(str){return null==str&&(str=""),new IO(function(){return fn(str),unit()})}},consoleIO=ioPerform(console.log.bind(console)),alertIO=ioPerform(alert),queryAnalyzer=function(str){var helper;return(helper=function(arr){return 0===arr.length?seq():helper(arr.slice(1)).concat(seq(arr[0]))})(str.split(/(?=\.[a-z0-9]|#[a-z0-9]| [a-z0-9])/g))},main=function(fn){return document.addEventListener("DOMContentLoaded",function(event){return fn(event).unsafePerformIO()})},{alertIO:alertIO,consoleIO:consoleIO,main:main}}(),State=function(_super){function State(run){this.run=run,this.fmap=function(f){return new State(function(s){var a,t,_ref;return _ref=run(s),a=_ref[0],t=_ref[1],[f(a),t]})},this.flatMap=function(f){return new State(function(s){var a,t,_ref;return _ref=run(s),a=_ref[0],t=_ref[1],f(a).run(t)})},this.evaluate=function(s){return run(s)[0]}}return __extends(State,_super),State.insert=function(a){return new State(function(s){return[a,s]})},State.get=function(f){return new State(function(s){return[f(s),s]})},State.mod=function(f){return new State(function(s){return[[],f(s)]})},State}(Monad),{unit:unit,Functor:Functor,Applicative:Applicative,Monad:Monad,Nothing:Nothing,Just:Just,nothing:nothing,map:map,seq:seq,Cons:Cons,nil:nil,arrayToSeq:arrayToSeq,Right:Right,Left:Left,_try:_try,Success:Success,Failure:Failure,IO:IO,FPNode:FPNode,IOPerformer:IOPerformer,State:State}}(),root="undefined"!=typeof exports&&null!==exports?exports:window,root.fpJS=fpJS}).call(this);